<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>AI Hub - Face-Det-Lite</title>
    <style>
        #img-container, #tpi-container {
            text-align: center;
        }
    </style>
</head>

<body>
    <div id="img-container">
        <img src="#" id="img">
    </div>

    <script>
        const socket = new WebSocket(location.protocol + '//' + location.host);

        socket.onopen = () => {
            console.log('socket.onopen');
            socket.send(JSON.stringify({
                type: 'toggle-camera-preview',
                enabled: true,
            }));
        };

        socket.onmessage = msg => {
            const data = JSON.parse(msg.data);
            if (data.type === 'image' && data.dataUrl) {
                document.querySelector('#img').src = data.dataUrl;
            }
            else {
                console.log('socket.onmessage', data);
            }
        };
    </script>
</body>
</html>
